<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic Snake Game</title>
    <style>
       body {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background-color: #333; /* Dark background */
    margin: 0;
    font-family: 'Arial', sans-serif;
    flex-direction: column;
}

.game-container {
    text-align: center;
    padding: 20px;
    background-color: #222;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
}

h1 {
    color: #fff;
    margin-bottom: 5px;
}

.instructions {
    color: #bbb;
    font-size: 0.9em;
    margin-bottom: 15px;
}

#gameCanvas {
    border: 5px solid #fff; /* White border for the game area */
    background-color: #000; /* Black canvas background */
    display: block; 
    margin: 0 auto;
}

.score-board {
    display: flex;
    justify-content: space-around;
    padding: 10px 0;
    margin-top: 5px;
}

.score {
    color: #fff;
    font-size: 1.2em;
    font-weight: bold;
}

.high-score {
    color: #ffcc00; /* Yellow for high score */
}

#restartButton {
    padding: 10px 20px;
    font-size: 16px;
    margin-top: 20px;
    cursor: pointer;
    background-color: #4CAF50; /* Green */
    color: white;
    border: none;
    border-radius: 5px;
    transition: background-color 0.3s, transform 0.1s;
    outline: none;
}

#restartButton:hover {
    background-color: #45a049;
}

#restartButton:active {
    transform: scale(0.98);
}
    </style>
</head>
<body>
    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic Snake Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <h1>Snake Game</h1>
        <p class="instructions">Use **Arrow Keys** to move. Press **Spacebar** to Pause.</p>
        
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        
        <div class="score-board">
            <p class="score">Score: <span id="currentScore">0</span></p>
            <p class="score high-score">High Score: <span id="highScoreDisplay">0</span></p>
        </div>
        
        <button id="restartButton">Restart Game</button>
    </div>
    <script src="script.js"></script>
</body>
</html>
    <script>
 // 1. Get Canvas and Context Elements
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const restartButton = document.getElementById('restartButton');
const scoreDisplay = document.getElementById('currentScore');
const highScoreDisplay = document.getElementById('highScoreDisplay');

// 2. Define Game Constants
const TILE_SIZE = 20; // Size of each square tile in pixels
const CANVAS_SIZE = 600; 
const TILES_PER_ROW = CANVAS_SIZE / TILE_SIZE; 
const INITIAL_SPEED = 100; // Milliseconds between updates (slowest speed)
const SPEED_INCREMENT_SCORE = 5; // Increase speed every 5 points
const MAX_SPEED_REDUCTION = 30; // Maximum speed reduction (game won't go below 30ms)

// 3. Game State Variables
let snake = [];
let food = {};
let dx = 1; // Horizontal velocity (1=right, -1=left)
let dy = 0; // Vertical velocity (1=down, -1=up)
let score = 0;
let highScore = 0;
let gameLoopInterval;
let isChangingDirection = false; 
let isPaused = false; // NEW Pause state variable

// --- Core Game Functions (Drawing & Movement) ---

function placeFood() {
    let newFood;
    do {
        newFood = {
            x: Math.floor(Math.random() * TILES_PER_ROW),
            y: Math.floor(Math.random() * TILES_PER_ROW)
        };
    } while (snake.some(segment => segment.x === newFood.x && segment.y === newFood.y));
    food = newFood;
}

function drawTile(x, y, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
    ctx.strokeStyle = '#000'; 
    ctx.strokeRect(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
}

function clearCanvas() {
    ctx.fillStyle = 'black';
    ctx.fillRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);
}

function drawSnake() {
    snake.forEach(segment => drawTile(segment.x, segment.y, 'lime'));
}

function drawFood() {
    drawTile(food.x, food.y, 'red');
}

function moveSnake() {
    const head = { x: snake[0].x + dx, y: snake[0].y + dy };
    snake.unshift(head);

    if (head.x === food.x && head.y === food.y) {
        score++;
        scoreDisplay.innerText = score;
        placeFood();
    } else {
        snake.pop(); 
    }
}

function checkCollision() {
    const head = snake[0];
    
    // Collision with walls
    const wallCollision = head.x < 0 || head.x >= TILES_PER_ROW || 
                          head.y < 0 || head.y >= TILES_PER_ROW;

    // Collision with self
    const selfCollision = snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y);

    if (wallCollision || selfCollision) {
        endGame();
        return true;
    }
    return false;
}

function updateGame() {
    if (checkCollision()) return;

    moveSnake();
    clearCanvas();
    drawFood();
    drawSnake();
    
    // Dynamic Speed Logic
    if (score > 0 && score % SPEED_INCREMENT_SCORE === 0 && !isChangingDirection) {
        const speedReduction = Math.floor(score / SPEED_INCREMENT_SCORE) * 5;
        const newSpeed = Math.max(INITIAL_SPEED - speedReduction, MAX_SPEED_REDUCTION);
        
        // Use a trick to check if the interval is running at the new speed
        if (gameLoopInterval && gameLoopInterval._timeout !== newSpeed) { 
            clearInterval(gameLoopInterval);
            gameLoopInterval = setInterval(updateGame, newSpeed);
        }
    }

    isChangingDirection = false;
}

// --- Control and Score Functions ---

function loadHighScore() {
    const storedScore = localStorage.getItem('snakeHighScore') || '0';
    highScore = parseInt(storedScore);
    highScoreDisplay.innerText = highScore;
}

function endGame() {
    clearInterval(gameLoopInterval);
    
    // High Score Check
    if (score > highScore) {
        highScore = score;
        localStorage.setItem('snakeHighScore', highScore);
        highScoreDisplay.innerText = highScore;
        
        ctx.fillStyle = 'yellow';
        ctx.font = '30px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('NEW HIGH SCORE!', CANVAS_SIZE / 2, CANVAS_SIZE / 2 - 40);
    }

    // Game Over Message
    ctx.fillStyle = 'white';
    ctx.font = '30px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Game Over! Score: ' + score, CANVAS_SIZE / 2, CANVAS_SIZE / 2);
    
    restartButton.style.backgroundColor = 'orange'; 
}

function togglePause() {
    if (gameLoopInterval === undefined) return; // Don't pause if game hasn't started or ended

    isPaused = !isPaused; 

    if (isPaused) {
        clearInterval(gameLoopInterval);
        
        // Display PAUSED message
        ctx.fillStyle = 'yellow';
        ctx.font = '40px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('PAUSED', CANVAS_SIZE / 2, CANVAS_SIZE / 2);
    } else {
        // Resume the game by starting the loop again at the calculated speed
        startGameLoop(); 
    }
}

// Function to start/restart the core game loop at the appropriate speed
function startGameLoop() {
    // Calculate the speed based on the current score (in case of resume)
    const speedReduction = Math.floor(score / SPEED_INCREMENT_SCORE) * 5;
    const currentSpeed = Math.max(INITIAL_SPEED - speedReduction, MAX_SPEED_REDUCTION);
    
    gameLoopInterval = setInterval(updateGame, currentSpeed); 
}

function resetGame() {
    clearInterval(gameLoopInterval); 

    // Reset all state variables
    snake = [{ x: 10, y: 10 }];
    dx = 1; 
    dy = 0;
    score = 0;
    isChangingDirection = false;
    isPaused = false;
    
    scoreDisplay.innerText = score;
    clearCanvas();
    startGame();
}

function startGame() {
    placeFood(); 
    isPaused = false;
    startGameLoop(); // Start the game loop
    restartButton.style.backgroundColor = '#4CAF50'; 
}

// --- Event Listeners ---

document.addEventListener('keydown', e => {
    
    // 1. Pause Toggle (Spacebar)
    if (e.code === 'Space') {
        e.preventDefault(); 
        togglePause();
        return; 
    }
    
    // Ignore direction changes if paused
    if (isPaused) return; 

    // 2. Direction Change Logic
    if (isChangingDirection) return;

    const key = e.key;
    let new_dx = dx;
    let new_dy = dy;

    if (key === 'ArrowLeft' && dx === 0) { 
        new_dx = -1; new_dy = 0;
    } else if (key === 'ArrowUp' && dy === 0) { 
        new_dx = 0; new_dy = -1;
    } else if (key === 'ArrowRight' && dx === 0) { 
        new_dx = 1; new_dy = 0;
    } else if (key === 'ArrowDown' && dy === 0) { 
        new_dx = 0; new_dy = 1;
    }

    if (new_dx !== dx || new_dy !== dy) {
        dx = new_dx;
        dy = new_dy;
        isChangingDirection = true;
    }
});

// Restart Button Listener
restartButton.addEventListener('click', resetGame);


// 7. Initialization
loadHighScore(); 
startGame();
    </script>
</body>
</html>